{"version":3,"sources":["js/utils.js","js/circleGrabber.js","js/drawingFunctions.js","js/main.js"],"names":["rects","clearCanvas","clearRect","canvas","width","height","fixNegativeHeightRect","rect","newRect","h","y","collides","circle1","rect1","circleRect","x","r","rect2","w","collidesWithRect","circle","checkingRect","some","getNewCircle","providedFlavor","kidArray","Math","floor","random","direction_x","direction_y","flavor","indexOf","img","document","querySelector","fillColor","old_direction_x","old_direction_y","movable","grabbedCircles","mouseIsDown","handleGrabCircle","e","console","log","clientX","clientY","mousePos","offsetLeft","offsetTop","i","circles","length","sqrt","push","handleReleaseGrabbedCircle","pop","handleMoveGrabbedCircle","execOnFingers","f","touches","preventDefault","stopPropagation","drawCandle","boost","fillRect","Object","values","saveColors","color","oldColor","ctx","strokeStyle","oldFillColor","fillStyle","restoreColors","drawCircle","beginPath","arc","PI","stroke","fill","drawBase","drawMenorah","drawCircles","filter","forEach","circleToDraw","drawImage","drawScore","font","fillText","score","getContext","HEIGHT","WIDTH","frameCount","numberOfCircles","parseInt","window","location","href","split","Array","moveCircles","circleCollidesWithBin","pow","binCircle","checkIfCirclesAreInBin","includes","setTimeout","binColor","drawEverything","style","visibility","addKid","kid","attachListeners","addEventListener","setInterval"],"mappings":"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","file":"main.de49fd9d.js","sourceRoot":"..","sourcesContent":["import {binCircle, canvas, checkingRect, circleCollidesWithBin, ctx} from \"./main\";\n\nexport const rects = []\n\nexport const clearCanvas = () => {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n}\nconst fixNegativeHeightRect = (rect) => {\n  const newRect = {...rect};\n  if (rect.h < 0) {\n    newRect.y += rect.h;\n    newRect.h = -rect.h;\n  }\n  return newRect;\n}\nexport const collides = (circle1, rect1) => {\n  const circleRect = {\n    x: circle1.x - circle1.r,\n    y: circle1.y - circle1.r,\n    w: circle1.r * 2,\n  };\n\n  const rect2 = rect1.h > 0 ? rect1 : fixNegativeHeightRect(rect1);\n\n  return (\n    rect2.x < circleRect.x && circleRect.x < rect2.x + rect2.w &&\n    rect2.y < circleRect.y && circleRect.y < rect2.y + rect2.h\n  ) || (\n    rect2.x < circleRect.x && circleRect.x < rect2.x + rect2.w &&\n    rect2.y < circleRect.y + circleRect.w && circleRect.y + circleRect.w < rect2.y + rect2.h\n  ) || (\n    rect2.x < circleRect.x + circleRect.w && circleRect.x + circleRect.w < rect2.x + rect2.w &&\n    rect2.y < circleRect.y && circleRect.y < rect2.y + rect2.h\n  ) || (\n    rect2.x < circleRect.x + circleRect.w && circleRect.x + circleRect.w < rect2.x + rect2.w &&\n    rect2.y < circleRect.y + circleRect.w && circleRect.y + circleRect.w < rect2.y + rect2.h\n  );\n}\nexport const collidesWithRect = (circle) => {\n  if (!collides(circle, checkingRect)) return false;\n  if (circleCollidesWithBin(circle)) return true;\n\n  return rects.some(rect => collides(circle, rect));\n}\n\nexport const getNewCircle = (providedFlavor) => {\n  const kidArray = [\"dov\", \"racheli\", \"eitan\"];\n  const x = Math.floor(Math.random() * 8) * 100 + 100;\n  const y = Math.random() * 600 + 100;\n  const r = Math.floor(Math.random() * 30) + 25;\n  const x_boost = 0;//(Math.random() > 0.8) ? 20 : 0;\n  const direction_x = Math.random() * 2 - 1 + x_boost;\n  const direction_y = (Math.random() * 2 - 1) * 5;\n  const flavor = providedFlavor ? kidArray.indexOf(providedFlavor) : Math.floor(Math.random() * 3);\n  const img = document.querySelector(`#${kidArray[flavor]}`);\n  const fillColor = [\"green\", \"pink\", \"orange\"][flavor];\n\n  if(collidesWithRect({x, y, r})) {\n    return getNewCircle(providedFlavor);\n  }\n\n  return {\n    x, y, r,\n    direction_x, direction_y,\n    fillColor,\n    img,\n    old_direction_x: 0, old_direction_y: 0,\n    movable: true,\n  };\n};\n","import {canvas, circles} from \"./main\";\n\nexport let grabbedCircles = [];\nexport let mouseIsDown = false;\n\nexport const handleGrabCircle = (e) => {\n  console.log('grabbing circle at ', e.clientX, e.clientY, e.clientX, e.clientY);\n  mouseIsDown = true;\n  const mousePos = {\n    x: e.clientX - canvas.offsetLeft,\n    y: e.clientY - canvas.offsetTop\n  };\n\n  for (let i = 0; i < circles.length; i++) {\n    if (circles[i] && circles[i].movable) {\n      if (Math.sqrt((mousePos.x - circles[i].x) ** 2 + (mousePos.y - circles[i].y) ** 2) < circles[i].r) {\n        circles[i].old_direction_x = circles[i].direction_x;\n        circles[i].old_direction_y = circles[i].direction_y;\n        circles[i].direction_x = 0;\n        circles[i].direction_y = 0;\n        grabbedCircles.push(i);\n      }\n    }\n  }\n}\nexport const handleReleaseGrabbedCircle = (e) => {\n  mouseIsDown = false;\n  for (let i = 0; i < grabbedCircles.length; i++) {\n    circles[grabbedCircles[i]].direction_x = circles[grabbedCircles[i]]?.old_direction_x || 0;\n    circles[grabbedCircles[i]].direction_y = circles[grabbedCircles[i]]?.old_direction_y || 0;\n  }\n  for (let i = 0; i < grabbedCircles.length; i++) {\n    grabbedCircles.pop();\n  }\n}\nexport const handleMoveGrabbedCircle = (e) => {\n  if (mouseIsDown) {\n    const mousePos = {\n      x: e.clientX - canvas.offsetLeft,\n      y: e.clientY - canvas.offsetTop\n    };\n    for (let i = 0; i < grabbedCircles.length; i++) {\n      circles[grabbedCircles[i]].x = mousePos.x;\n      circles[grabbedCircles[i]].y = mousePos.y;\n    }\n  }\n}\n\nexport const execOnFingers = (f, e) => {\n  for(let i = 0; i < e.touches.length; i++) {\n    f(e.touches[i]);\n  }\n  e.preventDefault();\n  e.stopPropagation()\n}\n","import {ctx, circles, score} from \"./main\";\nimport {rects} from \"./utils\";\n\nexport const drawCandle = (x, boost = false) => {\n  const newRect = {x, y: 500, w: 50, h: -(150 + (boost ? 100 : 0))};\n  ctx.fillRect(...Object.values(newRect));\n  rects.push(newRect)\n};\n\nexport const saveColors = (color, fillColor) => {\n  let oldColor = ctx.strokeStyle, oldFillColor = ctx.fillStyle;\n  if (color) {\n    oldColor = ctx.strokeStyle;\n    ctx.strokeStyle = color;\n  }\n  if (fillColor) {\n    oldFillColor = ctx.fillStyle;\n    ctx.fillStyle = fillColor;\n  }\n\n  return {oldColor, oldFillColor};\n}\n\nexport const restoreColors = (oldColor, oldFillColor) => {\n  if (oldColor) ctx.strokeStyle = oldColor;\n  if (oldFillColor) ctx.fillStyle = oldFillColor;\n}\n\n\nexport const drawCircle = (x, y, r, color = null, fillColor = null) => {\n  const {oldColor, oldFillColor} = saveColors(color, fillColor);\n\n  ctx.beginPath();\n  ctx.arc(x, y, r, 0, 2 * Math.PI);\n  ctx.stroke();\n  ctx.fill();\n\n  restoreColors(oldColor, oldFillColor);\n};\nexport const drawBase = (x) => {\n  const newRect = {x, y: 500, w: 50 + 8 * 100, h: -50};\n  rects.push(newRect);\n  ctx.fillRect(...Object.values(newRect));\n}\n\nexport const drawMenorah = () => {\n  for (let i = 0; i <= 8; i++) {\n    const boost = i === 4;\n    drawCircle(75 + i * 100, 345 - (boost ? 100 : 0), 15, \"red\", \"yellow\");\n  }\n  drawBase(50);\n\n  for (let i = 0; i <= 8; i++) {\n    const boost = i === 4;\n    drawCandle(50 + i * 100, boost);\n  }\n}\n\nexport const drawCircles = () => {\n  circles.filter((x) => x).forEach((circleToDraw) => {\n    if(circleToDraw.movable) {\n      drawCircle(circleToDraw.x, circleToDraw.y, circleToDraw.r, \"black\", circleToDraw?.fillColor);\n    }\n    ctx.drawImage(circleToDraw.img, circleToDraw.x - circleToDraw.r * 0.8, circleToDraw.y - circleToDraw.r * 0.8, circleToDraw.r * 1.5, circleToDraw.r * 1.5);\n  });\n}\nexport const drawScore = () => {\n  ctx.font = \"30px Arial\";\n  const {oldColor, oldFillColor} = saveColors(\"black\", \"black\");\n  ctx.fillText(`Score: ${score}`, 850, 30);\n  restoreColors(oldColor, oldFillColor);\n}\n","import {clearCanvas, collides, collidesWithRect, getNewCircle, rects} from \"./utils\";\nimport {\n  execOnFingers,\n  grabbedCircles,\n  handleGrabCircle,\n  handleMoveGrabbedCircle,\n  handleReleaseGrabbedCircle,\n  mouseIsDown\n} from \"./circleGrabber\";\nimport {drawCircle, drawCircles, drawMenorah, drawScore, restoreColors, saveColors} from \"./drawingFunctions\";\n\nexport let canvas = document.querySelector(\"#myCanvas\");\nexport let ctx = canvas.getContext(\"2d\");\n\nctx.fillStyle = \"#FF0000\";\n\nconst HEIGHT = 1000, WIDTH = 1000;\n\nexport let score = 0;\n\nexport const checkingRect = {x: 50, y: 500, w: 50 + 8 * 100, h: -245};\n\n\nlet frameCount = 0;\n// get a number of circles from the url param number or 10 if not provided\nlet numberOfCircles = parseInt(window.location.href.split(\"?\")[1]?.split(\"=\")[1]) || 1;\n\n\n\nexport let circles = Array(numberOfCircles).fill(null);\n\nconst moveCircles = (e) => {\n  for(let i = 0; i < circles.length; i++) {\n    if(!circles[i]) circles[i] = getNewCircle();\n\n    if (collidesWithRect(circles[i])) {\n      circles[i].direction_x *= -1;\n      circles[i].direction_y *= -1;\n    }\n    else if(circles[i].x - circles[i].r < 0 || circles[i].x + circles[i].r > WIDTH) {\n      circles[i].direction_x *= -1;\n    }\n    else if(circles[i].y - circles[i].r < 0 || circles[i].y + circles[i].r > HEIGHT) {\n      circles[i].direction_y *= -1;\n    }\n\n    circles[i].x -= circles[i].direction_x;\n    circles[i].y -= circles[i].direction_y;\n  }\n};\n\nexport const circleCollidesWithBin = (circle) => {\n  return Math.sqrt(\n    Math.pow(binCircle.x - circle?.x, 2) + Math.pow(binCircle.y - circle?.y, 2)\n  ) < binCircle.r + circle?.r\n}\n\nconst checkIfCirclesAreInBin = () => {\n  if(grabbedCircles.length === 0) return;\n  circles.filter(x => x).forEach((circle, i) => {\n    if (\n      circle &&\n      circle.movable &&\n      grabbedCircles.includes(i) && circleCollidesWithBin(circle)) {\n      circle[\"direction_x\"] = 0;\n      circle[\"direction_y\"] = 0;\n      circle[\"old_direction_x\"] = 0;\n      circle[\"old_direction_y\"] = 0;\n      circle[\"movable\"] = false;\n      circle[\"fillColor\"] = \"red\";\n      score++;\n\n      // expand the bin a bit to make room\n      binCircle.x -= 10;\n      binCircle.y -= 10;\n      binCircle.r += 10;\n\n      if(score === circles.length) {\n        if(score > 10) {\n          for (let i = 0; i < 75; i++) {\n            setTimeout(() => circles.push(getNewCircle()), 300 + i * 100);\n          }\n        }\n        else {\n          //set score to a cool unicode character\n          score = \"🎉\";\n          setTimeout(() => {\n            // reload the page but add a url param called number with one more than the current number of circles\n            window.location.href = window.location.href.split(\"?\")[0] + \"?number=\" + (circles.length + 1);\n          }, 1000);\n        }\n      }\n    }\n  });\n};\n\nexport const binCircle = {x: 1000, y: 1000, r: 200};\n\nlet binColor = \"black\";\nfunction drawEverything() {\n\n// hide #dovButton if numberOfCircles is 1\n  if(numberOfCircles < 5) {\n    document.querySelector(\"#dovButton\").style.visibility = \"hidden\";\n    document.querySelector(\"#eitanButton\").style.visibility = \"hidden\";\n    document.querySelector(\"#racheliButton\").style.visibility = \"hidden\";\n  }\n\n  frameCount++;\n  clearCanvas();\n  // ctx.fillRect(...Object.values(checkingRect));\n\n  drawMenorah();\n\n  drawCircle(binCircle.x, binCircle.y, binCircle.r, \"black\", binColor);\n\n  checkIfCirclesAreInBin();\n\n  drawCircles();\n\n  if(frameCount % 1 === 0) {\n    moveCircles();\n  }\n\n  drawScore();\n}\n\nexport const addKid = (kid) => {\n  circles.push(getNewCircle(kid))\n}\n\ndocument.addKid = addKid;\n\nconst attachListeners = () => {\n  canvas.addEventListener(\"mousedown\", handleGrabCircle);\n  canvas.addEventListener(\"mouseup\", handleReleaseGrabbedCircle);\n  canvas.addEventListener(\"mousemove\", handleMoveGrabbedCircle);\n\n  canvas.addEventListener('touchstart', (e) => execOnFingers(handleGrabCircle, e));\n  canvas.addEventListener('touchend', (e) => execOnFingers(handleReleaseGrabbedCircle, e));\n  canvas.addEventListener('touchcancel', (e) => execOnFingers(handleReleaseGrabbedCircle, e));\n\n  canvas.addEventListener('touchmove', (e) => execOnFingers(handleMoveGrabbedCircle, e));\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", attachListeners);\n\n\nsetInterval(drawEverything, 50);\n"]}